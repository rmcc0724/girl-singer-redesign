window.cue=window.cue||{},function(a,b,c){"use strict";function d(){var a,b=e("cue_cid");return b||(b=Math.floor(2147483647*Math.random())+"."+Math.floor(Date.now()/1e3),a=new Date,a.setDate(a.getDate()+365),document.cookie="cue_cid=u"+b+"; expires="+a.toUTCString()+"; path=/"),b}function e(a){var b=new RegExp("(?:(?:^|.*;\\s*)"+a+"\\s*\\=\\s*([^;]*).*$)|^.*$");return document.cookie.replace(b,"$1")}function f(a){var c={};return"cueGetCurrentTrack"in a&&b.extend(c,a.cueGetCurrentTrack()),c.title||(c.title=b(a.node).attr("title")),b.extend({},{currentTime:a.media.currentTime,duration:a.media.duration,src:a.media.src,title:c.title||""})}var g,h=a.cue;b.extend(h,{log:function(c){return b.ajax({url:_cueproInsights.routeUrl,type:"POST",data:{action:c.action,client_uid:d(),page_title:b(document).find("title").text(),page_url:a.location.href,target_time:c.time,target_title:c.title,target_url:c.source}})}}),b.extend(MediaElementPlayer.prototype,{buildcueinsights:function(a,c,d,e){var i={},j=b(e),k=!1;"AUDIO"===a.node.tagName&&(j.on("play",_.debounce(function(b){var c=i.play||0,d=f(a),e=Math.round(d.currentTime);(!a.cueAutoResume||c)&&e<2&&(h.log({action:"play",source:d.src,time:e<2?0:e,title:d.title}),k=!1),i.play=c+1},250)),j.on("timeupdate",function(b){var c,d=.2*e.duration;g<d&&e.currentTime>d&&(c=f(a),h.log({action:"listen",source:c.src,time:Math.round(c.currentTime),title:c.title})),g=e.currentTime}),b(a.node).on("skipNext.cue",function(a,b,c){k||h.log({action:"skip",source:b.src,time:Math.round(b.currentTime),title:c.title||""}),k=!0}),j.on("ended",function(b){var c=f(a);h.log({action:"complete",source:c.src,time:Math.round(c.duration),title:c.title})}),j.on("seeked",function(b){var c=i.seek||0,d=f(a);Math.round(d.currentTime)>1&&a.cueAutoResume,i.seek=c+1}),j.on("pause",_.debounce(function(b){var c=f(a);Math.round(c.currentTime),Math.round(c.duration)},250)))}});var i=MediaElementPlayer.prototype.init;if(MediaElementPlayer.prototype.init=function(){-1===this.options.features.indexOf("cueinsights")&&this.options.features.unshift("cueinsights"),i.call(this)},"WPPlaylistView"in a){var j=a.WPPlaylistView.prototype.renderCurrent;a.WPPlaylistView.prototype.renderCurrent=function(){j.apply(this,arguments),b(this.playerNode).attr("title",this.current.get("title"))}}}(window,jQuery);