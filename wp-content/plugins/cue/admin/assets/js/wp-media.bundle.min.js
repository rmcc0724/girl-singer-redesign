!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e){t.exports=wp},function(t,e){t.exports=_},function(t,e,i){"use strict";(function(e){function s(){var t={};n.extend(this,{controller:{},l10n:{},model:{},view:{}}),this.settings=function(e){return e&&n.extend(t,e),t.l10n&&(this.l10n=n.extend(this.l10n,t.l10n),delete t.l10n),t||{}}}var n=i(1);e.cue=e.cue||new s,t.exports=e.cue}).call(e,i(6))},function(t,e){t.exports=jQuery},function(t,e){t.exports=Backbone},,function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},,,,,,,,,,,,function(t,e,i){"use strict";!function(t){i(2).settings(_cueMediaSettings),t.media.view.MediaFrame.Post=i(19)}(wp)},function(t,e,i){"use strict";var s,n=i(20),o=i(25),l=i(26),r=i(0),c=r.media.view.MediaFrame.Post;s=c.extend({createStates:function(){c.prototype.createStates.apply(this,arguments),this.states.add(new o({}))},bindHandlers:function(){c.prototype.bindHandlers.apply(this,arguments),this.on("content:create:cue-playlist-browser",this.createCueContent,this),this.on("toolbar:create:cue-insert-playlist",this.createCueToolbar,this)},createCueMenu:function(t){t.view.set({"cue-playlist-separator":new r.media.View({className:"separator",priority:200})})},createCueContent:function(t){t.view=new n({controller:this})},createCueToolbar:function(t){t.view=new l({controller:this})}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(1),o=i(21),l=i(23),r=i(24),c=i(0);s=c.Backbone.View.extend({className:"cue-playlist-browser",initialize:function(t){this.collection=t.controller.state().get("collection"),this.controller=t.controller,this._paged=1,this._pending=!1,n.bindAll(this,"scroll"),this.listenTo(this.collection,"reset",this.render),this.collection.length||this.getPlaylists()},render:function(){return this.$el.off("scroll").on("scroll",this.scroll),this.views.add([new o({collection:this.collection,controller:this.controller}),new r({controller:this.controller}),new l({collection:this.collection})]),this},scroll:function(){!this._pending&&this.el.scrollHeight<this.el.scrollTop+3*this.el.clientHeight&&(this._pending=!0,this.getPlaylists())},getPlaylists:function(){var t=this;c.ajax.post("cue_get_playlists",{paged:t._paged}).done(function(e){t.collection.add(e.playlists),++t._paged<=e.maxNumPages&&(t._pending=!1,t.scroll())})}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(22);s=i(0).Backbone.View.extend({className:"cue-playlist-browser-list",tagName:"ul",initialize:function(t){this.collection=t.controller.state().get("collection"),this.controller=t.controller,this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"reset",this.render)},render:function(){return this.collection.each(this.addItem,this),this},addItem:function(t){var e=new n({controller:this.controller,model:t}).render();this.$el.append(e.el)}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(0);s=n.Backbone.View.extend({tagName:"li",className:"cue-playlist-browser-list-item",template:n.template("cue-playlist-browser-list-item"),events:{click:"resetSelection"},initialize:function(t){this.controller=t.controller,this.model=t.model,this.selection=this.controller.state().get("selection"),this.listenTo(this.selection,"add remove reset",this.updateSelectedClass)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},resetSelection:function(t){this.selection.contains(this.model)?this.selection.remove(this.model):this.selection.reset(this.model)},updateSelectedClass:function(){this.selection.contains(this.model)?this.$el.addClass("is-selected"):this.$el.removeClass("is-selected")}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(0);s=n.Backbone.View.extend({className:"cue-playlist-browser-empty",tagName:"div",template:n.template("cue-playlist-browser-empty"),initialize:function(t){this.collection=this.collection,this.listenTo(this.collection,"add remove reset",this.toggleVisibility)},render:function(){return this.$el.html(this.template()),this},toggleVisibility:function(){this.$el.toggleClass("is-visible",this.collection.length<1)}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(3),o=i(0);s=o.Backbone.View.extend({className:"cue-playlist-browser-sidebar media-sidebar",template:o.template("cue-playlist-browser-sidebar"),events:{"change [data-setting]":"updateAttribute"},initialize:function(t){this.attributes=t.controller.state().get("attributes")},render:function(){this.$el.html(this.template())},updateAttribute:function(t){var e=n(t.target),i=e.data("setting"),s=t.target.value;"checkbox"===t.target.type&&(s=!!e.prop("checked")),this.attributes.set(i,s)}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(4),o=i(2).l10n;s=i(0).media.controller.State.extend({defaults:{id:"cue-playlists",title:o.insertPlaylist||"Insert Playlist",collection:null,content:"cue-playlist-browser",menu:"default",menuItem:{text:o.insertFromCue||"Insert from Cue",priority:130},selection:null,toolbar:"cue-insert-playlist"},initialize:function(t){var e=t.collection||new n.Collection,i=t.selection||new n.Collection;this.set("attributes",new n.Model({id:null,show_playlist:!0})),this.set("collection",e),this.set("selection",i),this.listenTo(i,"remove",this.updateSelection)}}),t.exports=s},function(t,e,i){"use strict";var s,n=i(1),o=i(0);s=o.media.view.Toolbar.extend({initialize:function(t){this.controller=t.controller,n.bindAll(this,"insertCueShortcode"),this.options.items=n.defaults(this.options.items||{},{insert:{text:o.media.view.l10n.insertIntoPost||"Insert into post",style:"primary",priority:80,requires:{selection:!0},click:this.insertCueShortcode}}),o.media.view.Toolbar.prototype.initialize.apply(this,arguments)},insertCueShortcode:function(){var t,e=this.controller.state(),i=e.get("attributes").toJSON(),s=e.get("selection").first();i.id=s.get("id"),n.pick(i,"id","theme","width","show_playlist"),i.show_playlist?delete i.show_playlist:i.show_playlist="0",t=o.shortcode.string({tag:"cue",type:"single",attrs:i}),o.media.editor.insert(t),this.controller.close()}}),t.exports=s}]);