!function(a,b,c){"use strict";jQuery(function(a){var b,c,d,e=wp.media.model.Attachment,f=wp.Uploader.defaults.filters.mime_types||[];d={init:function(){a("#wpbody").on("click",".audiotheme-media-control-choose",function(e){var f;e.preventDefault(),b=a(this).closest(".audiotheme-media-control"),f=b.data("target")||".audiotheme-media-control-target",c=0===f.indexOf("#")?a(f):b.find(f),b.data("upload-extensions")&&(wp.Uploader.defaults.filters.mime_types=[{title:AudiothemeMediaControl.audioFiles,extensions:b.data("upload-extensions")}]),d.frame().open()})},select:function(){var a=this.get("selection"),d=b.data("return-property")||"id";c.length&&c.val(a.pluck(d)),b.trigger("selectionChange.audiotheme",[a])},updateLibrarySelection:function(){var a,b,d=this.get("library").get("selection");c.length&&(b=c.val(),b&&""!==b&&-1!==b&&"0"!==b&&(a=e.get(b),a.fetch())),d.reset(a?[a]:[])},frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:b.data("title")||AudiothemeMediaControl.frameTitle,library:{type:b.data("file-type")||"image"},button:{text:b.data("update-text")||AudiothemeMediaControl.frameUpdateText},multiple:b.data("select-multiple")||!1}),this._frame.on("open",this.updateLibrarySelection).on("close",function(){wp.Uploader.defaults.filters.mime_types=f}).state("library").on("select",this.select),this._frame)}},d.init()})}(jQuery,window);